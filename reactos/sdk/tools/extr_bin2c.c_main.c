
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






typedef int FILE ;


 scalar_t__ _stricmp (char*,char*) ;
 size_t dumpHex (int *,int *,int) ;
 size_t dumpStr (int *,int *) ;
 int fclose (int *) ;
 int * fopen (char*,char*) ;
 int fprintf (int *,char*,...) ;
 int stderr ;
 int usage (char*) ;

int main(int argc, char* argv[])
{
    FILE* inFile;
    FILE* outCFile;
    FILE* outHFile;
    size_t bufLen;


    if (argc < 6)
    {
        usage(argv[0]);
        return -1;
    }


    if (_stricmp(argv[4], "BIN" ) != 0 &&
        _stricmp(argv[4], "BINSTR") != 0 &&
        _stricmp(argv[4], "STR" ) != 0)
    {
        usage(argv[0]);
        return -1;
    }


    inFile = fopen(argv[1], "rb");
    if (!inFile)
    {
        fprintf(stderr, "ERROR: Couldn't open data file '%s'.\n", argv[1]);
        return -1;
    }
    outCFile = fopen(argv[2], "w");
    if (!outCFile)
    {
        fclose(inFile);
        fprintf(stderr, "ERROR: Couldn't create output source file '%s'.\n", argv[2]);
        return -1;
    }
    outHFile = fopen(argv[3], "w");
    if (!outHFile)
    {
        fclose(outCFile);
        fclose(inFile);
        fprintf(stderr, "ERROR: Couldn't create output header file '%s'.\n", argv[3]);
        return -1;
    }


    fprintf(outCFile, "/* This file is autogenerated, do not edit. */\n\n");
    if (argc >= 8)
    {

        fprintf(outCFile, "#include \"%s\"\n", argv[7]);
    }
    fprintf(outCFile, "#include \"%s\"\n\n", argv[3]);


    if (argc >= 7)
    {

        fprintf(outCFile, "%s ", argv[6]);
    }
    fprintf(outCFile, "unsigned char %s[] =", argv[5]);


    if (_stricmp(argv[4], "BIN") == 0)
        bufLen = dumpHex(inFile, outCFile, 0);
    else if (_stricmp(argv[4], "BINSTR") == 0)
        bufLen = dumpHex(inFile, outCFile, 1);
    else
        bufLen = dumpStr(inFile, outCFile);

    fprintf(outCFile, ";\n");
    fclose(outCFile);


    fprintf(outHFile, "/* This file is autogenerated, do not edit. */\n\n");
    fprintf(outHFile, "#define %s_SIZE %lu\n" , argv[5], (unsigned long)bufLen);
    fprintf(outHFile, "extern unsigned char %s[%lu];\n", argv[5], (unsigned long)bufLen);
    fclose(outHFile);


    fclose(inFile);

    return 0;
}
