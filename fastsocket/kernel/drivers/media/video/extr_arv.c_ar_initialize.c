
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






struct video_device {int dummy; } ;
struct ar_device {scalar_t__ size; scalar_t__ mode; } ;


 int ARINTSEL ;
 unsigned long ARINTSEL_INT3 ;
 int ARVCR0 ;
 unsigned long ARVCR0_RST ;
 int ARVCR0_VDS ;
 int ARVCR1 ;
 unsigned long ARVCR1_NORMAL ;
 unsigned long ARVCR1_QVGA ;
 scalar_t__ AR_MODE_NORMAL ;
 scalar_t__ AR_SIZE_QVGA ;
 int DEBUG (int,char*) ;
 int ENODEV ;
 int ar_inl (int ) ;
 int ar_outl (unsigned long,int ) ;
 int cpu_relax () ;
 int iic (int,int,int,int,int) ;
 int init_iic () ;
 int printk (char*) ;
 struct ar_device* video_get_drvdata (struct video_device*) ;

__attribute__((used)) static int ar_initialize(struct video_device *dev)
{
 struct ar_device *ar = video_get_drvdata(dev);
 unsigned long cr = 0;
 int i,found=0;

 DEBUG(1, "ar_initialize:\n");




 ar_outl(0, ARVCR0);
 for (i = 0; i < 0x18; i++)
  cpu_relax();
 ar_outl(ARVCR0_RST, ARVCR0);
 for (i = 0; i < 0x40d; i++)
  cpu_relax();


 ar_outl(ARINTSEL_INT3, ARINTSEL);

 if (ar->size == AR_SIZE_QVGA)
  cr |= ARVCR1_QVGA;
 if (ar->mode == AR_MODE_NORMAL)
  cr |= ARVCR1_NORMAL;
 ar_outl(cr, ARVCR1);





 init_iic();

 for (i = 0; i < 0x100000; i++) {
  if ((ar_inl(ARVCR0) & ARVCR0_VDS)) {
   found = 1;
   break;
  }
 }

 if (found == 0)
  return -ENODEV;

 printk("arv: Initializing ");

 iic(2,0x78,0x11,0x01,0x00);
 iic(3,0x78,0x12,0x00,0x06);
 iic(3,0x78,0x12,0x12,0x30);
 iic(3,0x78,0x12,0x15,0x58);
 iic(3,0x78,0x12,0x17,0x30);
 printk(".");
 iic(3,0x78,0x12,0x1a,0x97);
 iic(3,0x78,0x12,0x1b,0xff);
 iic(3,0x78,0x12,0x1c,0xff);
 iic(3,0x78,0x12,0x26,0x10);
 iic(3,0x78,0x12,0x27,0x00);
 printk(".");
 iic(2,0x78,0x34,0x02,0x00);
 iic(2,0x78,0x7a,0x10,0x00);
 iic(2,0x78,0x80,0x39,0x00);
 iic(2,0x78,0x81,0xe6,0x00);
 iic(2,0x78,0x8d,0x00,0x00);
 printk(".");
 iic(2,0x78,0x8e,0x0c,0x00);
 iic(2,0x78,0x8f,0x00,0x00);



 iic(2,0x78,0x93,0x01,0x00);
 iic(2,0x78,0x94,0xcd,0x00);
 iic(2,0x78,0x95,0x00,0x00);
 printk(".");
 iic(2,0x78,0x96,0xa0,0x00);
 iic(2,0x78,0x97,0x00,0x00);
 iic(2,0x78,0x98,0x60,0x00);
 iic(2,0x78,0x99,0x01,0x00);
 iic(2,0x78,0x9a,0x19,0x00);
 printk(".");
 iic(2,0x78,0x9b,0x02,0x00);
 iic(2,0x78,0x9c,0xe8,0x00);
 iic(2,0x78,0x9d,0x02,0x00);
 iic(2,0x78,0x9e,0x2e,0x00);
 iic(2,0x78,0xb8,0x78,0x00);
 iic(2,0x78,0xba,0x05,0x00);



 printk(".");


 iic(3,0x78,0x49,0x00,0x95);
 iic(3,0x78,0x49,0x01,0x96);
 iic(3,0x78,0x49,0x03,0x85);
 iic(3,0x78,0x49,0x04,0x97);
 iic(3,0x78,0x49,0x02,0x7e);
 iic(3,0x78,0x49,0x05,0xa4);
 iic(3,0x78,0x49,0x06,0x04);
 iic(3,0x78,0x49,0x07,0x04);
 iic(2,0x78,0x48,0x01,0x00);

 printk(".");
 iic(2,0x78,0x11,0x00,0x00);
 printk(" done\n");
 return 0;
}
