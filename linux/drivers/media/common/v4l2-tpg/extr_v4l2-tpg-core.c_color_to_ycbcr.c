
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






struct tpg_data {scalar_t__ real_quantization; int real_ycbcr_enc; } ;


 int COEFF (double,int) ;
 scalar_t__ V4L2_QUANTIZATION_FULL_RANGE ;







 int linear_to_rec709 (int) ;
 int rec709_to_linear (int) ;
 int rgb2ycbcr (int const**,int,int,int,unsigned int,int*,int*,int*) ;

__attribute__((used)) static void color_to_ycbcr(struct tpg_data *tpg, int r, int g, int b,
      int *y, int *cb, int *cr)
{


 static const int bt601[3][3] = {
  { ((int)(0.5 + (0.299) * (219) * 256.0)), ((int)(0.5 + (0.587) * (219) * 256.0)), ((int)(0.5 + (0.114) * (219) * 256.0)) },
  { ((int)(0.5 + (-0.1687) * (224) * 256.0)), ((int)(0.5 + (-0.3313) * (224) * 256.0)), ((int)(0.5 + (0.5) * (224) * 256.0)) },
  { ((int)(0.5 + (0.5) * (224) * 256.0)), ((int)(0.5 + (-0.4187) * (224) * 256.0)), ((int)(0.5 + (-0.0813) * (224) * 256.0)) },
 };
 static const int bt601_full[3][3] = {
  { ((int)(0.5 + (0.299) * (255) * 256.0)), ((int)(0.5 + (0.587) * (255) * 256.0)), ((int)(0.5 + (0.114) * (255) * 256.0)) },
  { ((int)(0.5 + (-0.1687) * (255) * 256.0)), ((int)(0.5 + (-0.3313) * (255) * 256.0)), ((int)(0.5 + (0.5) * (255) * 256.0)) },
  { ((int)(0.5 + (0.5) * (255) * 256.0)), ((int)(0.5 + (-0.4187) * (255) * 256.0)), ((int)(0.5 + (-0.0813) * (255) * 256.0)) },
 };
 static const int rec709[3][3] = {
  { ((int)(0.5 + (0.2126) * (219) * 256.0)), ((int)(0.5 + (0.7152) * (219) * 256.0)), ((int)(0.5 + (0.0722) * (219) * 256.0)) },
  { ((int)(0.5 + (-0.1146) * (224) * 256.0)), ((int)(0.5 + (-0.3854) * (224) * 256.0)), ((int)(0.5 + (0.5) * (224) * 256.0)) },
  { ((int)(0.5 + (0.5) * (224) * 256.0)), ((int)(0.5 + (-0.4542) * (224) * 256.0)), ((int)(0.5 + (-0.0458) * (224) * 256.0)) },
 };
 static const int rec709_full[3][3] = {
  { ((int)(0.5 + (0.2126) * (255) * 256.0)), ((int)(0.5 + (0.7152) * (255) * 256.0)), ((int)(0.5 + (0.0722) * (255) * 256.0)) },
  { ((int)(0.5 + (-0.1146) * (255) * 256.0)), ((int)(0.5 + (-0.3854) * (255) * 256.0)), ((int)(0.5 + (0.5) * (255) * 256.0)) },
  { ((int)(0.5 + (0.5) * (255) * 256.0)), ((int)(0.5 + (-0.4542) * (255) * 256.0)), ((int)(0.5 + (-0.0458) * (255) * 256.0)) },
 };
 static const int smpte240m[3][3] = {
  { ((int)(0.5 + (0.212) * (219) * 256.0)), ((int)(0.5 + (0.701) * (219) * 256.0)), ((int)(0.5 + (0.087) * (219) * 256.0)) },
  { ((int)(0.5 + (-0.116) * (224) * 256.0)), ((int)(0.5 + (-0.384) * (224) * 256.0)), ((int)(0.5 + (0.5) * (224) * 256.0)) },
  { ((int)(0.5 + (0.5) * (224) * 256.0)), ((int)(0.5 + (-0.445) * (224) * 256.0)), ((int)(0.5 + (-0.055) * (224) * 256.0)) },
 };
 static const int smpte240m_full[3][3] = {
  { ((int)(0.5 + (0.212) * (255) * 256.0)), ((int)(0.5 + (0.701) * (255) * 256.0)), ((int)(0.5 + (0.087) * (255) * 256.0)) },
  { ((int)(0.5 + (-0.116) * (255) * 256.0)), ((int)(0.5 + (-0.384) * (255) * 256.0)), ((int)(0.5 + (0.5) * (255) * 256.0)) },
  { ((int)(0.5 + (0.5) * (255) * 256.0)), ((int)(0.5 + (-0.445) * (255) * 256.0)), ((int)(0.5 + (-0.055) * (255) * 256.0)) },
 };
 static const int bt2020[3][3] = {
  { ((int)(0.5 + (0.2627) * (219) * 256.0)), ((int)(0.5 + (0.6780) * (219) * 256.0)), ((int)(0.5 + (0.0593) * (219) * 256.0)) },
  { ((int)(0.5 + (-0.1396) * (224) * 256.0)), ((int)(0.5 + (-0.3604) * (224) * 256.0)), ((int)(0.5 + (0.5) * (224) * 256.0)) },
  { ((int)(0.5 + (0.5) * (224) * 256.0)), ((int)(0.5 + (-0.4598) * (224) * 256.0)), ((int)(0.5 + (-0.0402) * (224) * 256.0)) },
 };
 static const int bt2020_full[3][3] = {
  { ((int)(0.5 + (0.2627) * (255) * 256.0)), ((int)(0.5 + (0.6780) * (255) * 256.0)), ((int)(0.5 + (0.0593) * (255) * 256.0)) },
  { ((int)(0.5 + (-0.1396) * (255) * 256.0)), ((int)(0.5 + (-0.3604) * (255) * 256.0)), ((int)(0.5 + (0.5) * (255) * 256.0)) },
  { ((int)(0.5 + (0.5) * (255) * 256.0)), ((int)(0.5 + (-0.4598) * (255) * 256.0)), ((int)(0.5 + (-0.0402) * (255) * 256.0)) },
 };
 static const int bt2020c[4] = {
  ((int)(0.5 + (1.0 / 1.9404) * (224) * 256.0)), ((int)(0.5 + (1.0 / 1.5816) * (224) * 256.0)),
  ((int)(0.5 + (1.0 / 1.7184) * (224) * 256.0)), ((int)(0.5 + (1.0 / 0.9936) * (224) * 256.0)),
 };
 static const int bt2020c_full[4] = {
  ((int)(0.5 + (1.0 / 1.9404) * (255) * 256.0)), ((int)(0.5 + (1.0 / 1.5816) * (255) * 256.0)),
  ((int)(0.5 + (1.0 / 1.7184) * (255) * 256.0)), ((int)(0.5 + (1.0 / 0.9936) * (255) * 256.0)),
 };

 bool full = tpg->real_quantization == V4L2_QUANTIZATION_FULL_RANGE;
 unsigned y_offset = full ? 0 : 16;
 int lin_y, yc;

 switch (tpg->real_ycbcr_enc) {
 case 134:
  rgb2ycbcr(full ? bt601_full : bt601, r, g, b, y_offset, y, cb, cr);
  break;
 case 129:


  rgb2ycbcr(bt601, r, g, b, 16, y, cb, cr);
  break;
 case 128:


  rgb2ycbcr(rec709, r, g, b, 16, y, cb, cr);
  break;
 case 132:
  rgb2ycbcr(full ? bt2020_full : bt2020, r, g, b, y_offset, y, cb, cr);
  break;
 case 131:
  lin_y = (((int)(0.5 + (0.2627) * (255) * 256.0)) * rec709_to_linear(r) +
    ((int)(0.5 + (0.6780) * (255) * 256.0)) * rec709_to_linear(g) +
    ((int)(0.5 + (0.0593) * (255) * 256.0)) * rec709_to_linear(b)) >> 16;
  yc = linear_to_rec709(lin_y);
  *y = full ? yc : (yc * 219) / 255 + (16 << 4);
  if (b <= yc)
   *cb = (((b - yc) * (full ? bt2020c_full[0] : bt2020c[0])) >> 16) + (128 << 4);
  else
   *cb = (((b - yc) * (full ? bt2020c_full[1] : bt2020c[1])) >> 16) + (128 << 4);
  if (r <= yc)
   *cr = (((r - yc) * (full ? bt2020c_full[2] : bt2020c[2])) >> 16) + (128 << 4);
  else
   *cr = (((r - yc) * (full ? bt2020c_full[3] : bt2020c[3])) >> 16) + (128 << 4);
  break;
 case 130:
  rgb2ycbcr(full ? smpte240m_full : smpte240m, r, g, b, y_offset, y, cb, cr);
  break;
 case 133:
 default:
  rgb2ycbcr(full ? rec709_full : rec709, r, g, b, y_offset, y, cb, cr);
  break;
 }
}
