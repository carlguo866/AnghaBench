
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






struct tpg_data {scalar_t__ real_quantization; int real_ycbcr_enc; } ;


 int COEFF (double,int) ;
 scalar_t__ V4L2_QUANTIZATION_FULL_RANGE ;







 int linear_to_rec709 (int) ;
 int rec709_to_linear (int) ;
 int ycbcr2rgb (int const**,int,int,int,unsigned int,int*,int*,int*) ;

__attribute__((used)) static void ycbcr_to_color(struct tpg_data *tpg, int y, int cb, int cr,
      int *r, int *g, int *b)
{


 static const int bt601[3][3] = {
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (1.4020) * ((255.0 * 255.0 * 16.0) / (224)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (-0.3441) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (-0.7141) * ((255.0 * 255.0 * 16.0) / (224)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (1.7720) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (224)))) },
 };
 static const int bt601_full[3][3] = {
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (1.4020) * ((255.0 * 255.0 * 16.0) / (255)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (-0.3441) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (-0.7141) * ((255.0 * 255.0 * 16.0) / (255)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (1.7720) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (255)))) },
 };
 static const int rec709[3][3] = {
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (1.5748) * ((255.0 * 255.0 * 16.0) / (224)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (-0.1873) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (-0.4681) * ((255.0 * 255.0 * 16.0) / (224)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (1.8556) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (224)))) },
 };
 static const int rec709_full[3][3] = {
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (1.5748) * ((255.0 * 255.0 * 16.0) / (255)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (-0.1873) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (-0.4681) * ((255.0 * 255.0 * 16.0) / (255)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (1.8556) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (255)))) },
 };
 static const int smpte240m[3][3] = {
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (1.5756) * ((255.0 * 255.0 * 16.0) / (224)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (-0.2253) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (-0.4767) * ((255.0 * 255.0 * 16.0) / (224)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (1.8270) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (224)))) },
 };
 static const int smpte240m_full[3][3] = {
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (1.5756) * ((255.0 * 255.0 * 16.0) / (255)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (-0.2253) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (-0.4767) * ((255.0 * 255.0 * 16.0) / (255)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (1.8270) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (255)))) },
 };
 static const int bt2020[3][3] = {
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (1.4746) * ((255.0 * 255.0 * 16.0) / (224)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (-0.1646) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (-0.5714) * ((255.0 * 255.0 * 16.0) / (224)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (219)))), ((int)(0.5 + (1.8814) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (224)))) },
 };
 static const int bt2020_full[3][3] = {
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (1.4746) * ((255.0 * 255.0 * 16.0) / (255)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (-0.1646) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (-0.5714) * ((255.0 * 255.0 * 16.0) / (255)))) },
  { ((int)(0.5 + (1) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (1.8814) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (0) * ((255.0 * 255.0 * 16.0) / (255)))) },
 };
 static const int bt2020c[4] = {
  ((int)(0.5 + (1.9404) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (1.5816) * ((255.0 * 255.0 * 16.0) / (224)))),
  ((int)(0.5 + (1.7184) * ((255.0 * 255.0 * 16.0) / (224)))), ((int)(0.5 + (0.9936) * ((255.0 * 255.0 * 16.0) / (224)))),
 };
 static const int bt2020c_full[4] = {
  ((int)(0.5 + (1.9404) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (1.5816) * ((255.0 * 255.0 * 16.0) / (255)))),
  ((int)(0.5 + (1.7184) * ((255.0 * 255.0 * 16.0) / (255)))), ((int)(0.5 + (0.9936) * ((255.0 * 255.0 * 16.0) / (255)))),
 };

 bool full = tpg->real_quantization == V4L2_QUANTIZATION_FULL_RANGE;
 unsigned y_offset = full ? 0 : 16;
 int y_fac = full ? ((int)(0.5 + (1.0) * ((255.0 * 255.0 * 16.0) / (255)))) : ((int)(0.5 + (1.0) * ((255.0 * 255.0 * 16.0) / (219))));
 int lin_r, lin_g, lin_b, lin_y;

 switch (tpg->real_ycbcr_enc) {
 case 134:
  ycbcr2rgb(full ? bt601_full : bt601, y, cb, cr, y_offset, r, g, b);
  break;
 case 129:


  ycbcr2rgb(bt601, y, cb, cr, 16, r, g, b);
  break;
 case 128:


  ycbcr2rgb(rec709, y, cb, cr, 16, r, g, b);
  break;
 case 132:
  ycbcr2rgb(full ? bt2020_full : bt2020, y, cb, cr, y_offset, r, g, b);
  break;
 case 131:
  y -= full ? 0 : 16 << 4;
  cb -= 128 << 4;
  cr -= 128 << 4;

  if (cb <= 0)
   *b = y_fac * y + (full ? bt2020c_full[0] : bt2020c[0]) * cb;
  else
   *b = y_fac * y + (full ? bt2020c_full[1] : bt2020c[1]) * cb;
  *b = *b >> 12;
  if (cr <= 0)
   *r = y_fac * y + (full ? bt2020c_full[2] : bt2020c[2]) * cr;
  else
   *r = y_fac * y + (full ? bt2020c_full[3] : bt2020c[3]) * cr;
  *r = *r >> 12;
  lin_r = rec709_to_linear(*r);
  lin_b = rec709_to_linear(*b);
  lin_y = rec709_to_linear((y * 255) / (full ? 255 : 219));

  lin_g = ((int)(0.5 + (1.0 / 0.6780) * ((255.0 * 255.0 * 16.0) / (255)))) * lin_y -
   ((int)(0.5 + (0.2627 / 0.6780) * ((255.0 * 255.0 * 16.0) / (255)))) * lin_r -
   ((int)(0.5 + (0.0593 / 0.6780) * ((255.0 * 255.0 * 16.0) / (255)))) * lin_b;
  *g = linear_to_rec709(lin_g >> 12);
  break;
 case 130:
  ycbcr2rgb(full ? smpte240m_full : smpte240m, y, cb, cr, y_offset, r, g, b);
  break;
 case 133:
 default:
  ycbcr2rgb(full ? rec709_full : rec709, y, cb, cr, y_offset, r, g, b);
  break;
 }
}
