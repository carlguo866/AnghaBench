
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 scalar_t__ MAP_FAILED ;
 int O_CREAT ;
 int O_RDWR ;
 int PROT_EXEC ;
 int PROT_READ ;
 int SEEK_SET ;
 int S_IRUSR ;
 int S_IWUSR ;
 int err (int,char*) ;
 scalar_t__ lseek (int,long,int ) ;
 scalar_t__ mmap (int *,int ,int,int *,int,int *) ;
 int open (char*,int,int) ;
 int shellcode ;
 int strlen (int ) ;
 int write (int,int ,int ) ;

int main(void)
{
        void (*p)();
 int fd;

 fd=open("/tmp/. ", O_RDWR|O_CREAT, S_IRUSR|S_IWUSR);
 if(fd < 0)
  err(1, "open");

 write(fd, shellcode, strlen(shellcode));
 if((lseek(fd, 0L, SEEK_SET)) < 0)
  err(1, "lseek");

 p = (void (*)())mmap(((void*)0), strlen(shellcode), PROT_READ|PROT_EXEC, ((void*)0), fd, ((void*)0));
 if (p == (void (*)())MAP_FAILED)
  err(1, "mmap");
 p();
 return 0;
}
