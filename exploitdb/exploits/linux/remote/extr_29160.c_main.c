
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_2__ TYPE_1__ ;


struct TYPE_2__ {int chksum; int gname; int uname; int magic; int typeflag; int mtime; int size; int gid; int uid; int mode; int name; } ;
union block {int* buffer; TYPE_1__ header; } ;
typedef int b ;


 int GNUTYPE_NAMES ;
 scalar_t__ asprintf (char**,char*,char*) ;
 int data (char*,int) ;
 int exit (int) ;
 int fprintf (int ,char*) ;
 int fwrite (union block*,int,int,int ) ;
 int memset (union block*,int ,int) ;
 int sprintf (int ,char*,unsigned int) ;
 int stderr ;
 int stdout ;
 int strcpy (int ,char*) ;
 int strlen (char*) ;

int main(int argc, char *argv[])
{
         char *link_name = "xyz";
         union block b;
         char *d;
         int i;
        unsigned int cksum;

         if (argc > 1)
                 link_name = argv[1];

         if (asprintf(&d, "Symlink / to %s\n", link_name) < 0) {
                 fprintf(stderr, "out of memory\n");
                 exit(1);
         }
         memset(&b, 0, sizeof(b));
         strcpy(b.header.name, "xyz");
         strcpy(b.header.mode, "0000777");
         strcpy(b.header.uid, "0000000");
         strcpy(b.header.gid, "0000000");
         sprintf(b.header.size, "%011o", strlen(d));
         strcpy(b.header.mtime, "00000000000");
         strcpy(b.header.chksum, "        ");
         b.header.typeflag = GNUTYPE_NAMES;
         strcpy(b.header.magic, "ustar  ");
         strcpy(b.header.uname, "root");
         strcpy(b.header.gname, "root");
         for (cksum = 0, i = 0; i < sizeof(b); i++)
                 cksum += b.buffer[i] & 0xff;
         sprintf(b.header.chksum, "%06o ", cksum);
         fwrite(&b, 1, sizeof(b), stdout);
         data(d, strlen(d));
}
