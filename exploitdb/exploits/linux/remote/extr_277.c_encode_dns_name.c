
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 int exit (int) ;
 int fprintf (int ,char*) ;
 int memset (char*,char,int) ;
 int stderr ;

void
encode_dns_name (char *buf, int len, int embed_pos)
{
 int ctr = 0;
 int adjusted = 0;
 embed_pos -= 2;
 len--;


 if (embed_pos >= len){
  fprintf (stderr, "encode_dns_name: embed_pos >= len\n");
  exit (1);
 }
 while (ctr < len)

  if (ctr+64 <= len){
   if (ctr+64 <= embed_pos || adjusted){
    *buf++ = 63;
    memset (buf, 'g', 63); buf += 63;
    ctr+=64;
   }
   else {
    *buf++ = embed_pos-ctr-1;
    memset (buf, 'o', embed_pos-ctr-1); buf += embed_pos-ctr-1;
    ctr+= embed_pos-ctr;
    adjusted++;
   }
  }
  else {
   if (len - ctr <= embed_pos || adjusted){
    *buf++ = len-ctr-1;
    memset (buf, 'g', len-ctr-1);
    ctr += 63;
   }
   else{
    *buf++ = embed_pos-len-ctr-1;
    memset (buf, 'o', embed_pos-len-ctr-1); buf += embed_pos-len-ctr-1;
    ctr += embed_pos-len-ctr;
    adjusted++;
   }
  }
 *buf=0x00;
}
