
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_2__ TYPE_1__ ;


typedef int u_short ;
struct timeval {int tv_sec; scalar_t__ tv_usec; } ;
struct TYPE_2__ {unsigned long s_addr; } ;
struct sockaddr_in {TYPE_1__ sin_addr; int sin_port; int sin_family; } ;
struct sockaddr {int dummy; } ;
typedef int host ;
typedef int fd_set ;


 int AF_INET ;
 int FD_SET (int,int *) ;
 int FD_ZERO (int *) ;
 int PACKETSIZE ;
 int htons (int ) ;
 int perror (char*) ;
 int printf (char*) ;
 int select (int,int *,int *,int *,struct timeval*) ;
 int sendto (int,unsigned char*,int,int ,struct sockaddr*,int) ;

int sendping(unsigned long dest, int port, int sock, unsigned char *buff)
{
 struct sockaddr_in host;
 int i, size;
 fd_set fdset;
 struct timeval tv;

 size=PACKETSIZE;
 host.sin_family = AF_INET;
 host.sin_port = htons((u_short)port);
 host.sin_addr.s_addr = dest;

 FD_ZERO(&fdset);
 FD_SET(sock, &fdset);
 tv.tv_sec = 10;
 tv.tv_usec = 0;

 i = select(sock+1, ((void*)0), &fdset, ((void*)0), &tv);
 if (i == 0) {
  printf("Timeout\n");
  return(1);
 } else if (i < 0) {
  perror("select: ");
  return(1);
 }

 if ( (sendto(sock, buff, size, 0,
  (struct sockaddr *)&host, sizeof(host))) != size ) {
  perror("sendto: ");
  return(1);
 }

 return 0;
}
