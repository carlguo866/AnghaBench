
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_4__ TYPE_2__ ;
typedef struct TYPE_3__ TYPE_1__ ;


struct timespec {scalar_t__ tv_nsec; int tv_sec; } ;
struct TYPE_3__ {int s_addr; } ;
struct sockaddr_in {int sin_port; TYPE_1__ sin_addr; int sin_family; } ;
struct sockaddr {int dummy; } ;
struct TYPE_4__ {int msg_iovlen; struct iovec* msg_iov; } ;
struct mmsghdr {size_t msg_len; TYPE_2__ msg_hdr; } ;
struct iovec {char* iov_base; int iov_len; } ;
typedef int sa ;
typedef int msgs ;


 int AF_INET ;
 int BUFSIZE ;
 int EXIT_FAILURE ;
 int EXIT_SUCCESS ;
 int INADDR_LOOPBACK ;
 int SOCK_DGRAM ;
 int TIMEOUT ;
 int VLEN ;
 int __NR_recvmmsg ;
 int bind (int,struct sockaddr*,int) ;
 int exit (int ) ;
 int htonl (int ) ;
 int htons (int) ;
 int memset (struct mmsghdr*,int ,int) ;
 int perror (char*) ;
 int printf (char*,int,...) ;
 int socket (int ,int ,int ) ;
 int syscall (int ,int,struct mmsghdr*,int,int ,void*) ;

int
main(void)
{



    int sockfd, retval, i;
    struct sockaddr_in sa;
    struct mmsghdr msgs[10];
    struct iovec iovecs[10];
    char bufs[10][200 +1];
    struct timespec timeout;

    sockfd = socket(AF_INET, SOCK_DGRAM, 0);
    if (sockfd == -1) {
        perror("socket()");
        exit(EXIT_FAILURE);
    }

    sa.sin_family = AF_INET;
    sa.sin_addr.s_addr = htonl(INADDR_LOOPBACK);
    sa.sin_port = htons(1234);
    if (bind(sockfd, (struct sockaddr *) &sa, sizeof(sa)) == -1) {
        perror("bind()");
        exit(EXIT_FAILURE);
    }

    memset(msgs, 0, sizeof(msgs));
    for (i = 0; i < 10; i++) {
        iovecs[i].iov_base = bufs[i];
        iovecs[i].iov_len = 200;
        msgs[i].msg_hdr.msg_iov = &iovecs[i];
        msgs[i].msg_hdr.msg_iovlen = 1;
    }

    timeout.tv_sec = 1;
    timeout.tv_nsec = 0;



    retval = syscall(__NR_recvmmsg, sockfd, msgs, 10, 0, (void *)1ul);
    if (retval == -1) {
        perror("recvmmsg()");
        exit(EXIT_FAILURE);
    }

    printf("%d messages received\n", retval);
    for (i = 0; i < retval; i++) {
        bufs[i][msgs[i].msg_len] = 0;
        printf("%d %s", i+1, bufs[i]);
    }
    exit(EXIT_SUCCESS);
}
