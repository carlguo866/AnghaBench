
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 int EXIT_FAILURE ;
 int MAP_FIXED ;
 int MAP_PRIVATE ;
 int PAGE_SIZE ;
 int PROT_READ ;
 int assert (int) ;
 int debug1 (char*,...) ;
 int exit (int ) ;
 void* mmap (void*,unsigned long,int ,int,int,int ) ;
 int perror (char*) ;

__attribute__((used)) static void mmap_fd_over(int fd, unsigned long fd_size, unsigned long start,
   unsigned long end) {
 int page_size = PAGE_SIZE;
 assert(fd_size % page_size == 0);
 assert(start % page_size == 0);
 assert(end % page_size == 0);
 assert((end - start) % fd_size == 0);

 debug1("mmap_fd_over: [%lx, %lx)\n", start, end);

 unsigned long addr;
 for (addr = start; addr < end; addr += fd_size) {
  void *rv = mmap((void *)addr, fd_size, PROT_READ,
    MAP_FIXED | MAP_PRIVATE, fd, 0);
  if (rv != (void *)addr) {
   perror("[-] mmap()");
   exit(EXIT_FAILURE);
  }
 }

 debug1("mmap_fd_over = void\n");
}
