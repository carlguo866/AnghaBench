
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 scalar_t__ ENODEV ;
 scalar_t__ ENOSYS ;
 int MPOL_MF_MOVE ;
 int __NR_move_pages ;
 int addr_to_nodes (unsigned long,int*) ;
 int buf ;
 scalar_t__ errno ;
 int exit (int) ;
 int fprintf (int ,char*) ;
 int stdout ;
 int syscall (int ,int ,int,int *,int*,int*,int ) ;

unsigned char get_byte_at_addr(unsigned long addr)
{
 int nodes[8];
 int node;
 int status;
 int i;
 int ret;
 unsigned char tmp = 0;

 addr_to_nodes(addr, (int *)&nodes);
 for (i = 0; i < 8; i++) {
  node = nodes[i];
  ret = syscall(__NR_move_pages, 0, 1, &buf, &node, &status, MPOL_MF_MOVE);
  if (errno == ENOSYS) {
   fprintf(stdout, "Error: move_pages is not supported on this kernel.\n");
   exit(1);
  } else if (errno != ENODEV)
   tmp |= (1 << i);
 }

 return tmp;
}
