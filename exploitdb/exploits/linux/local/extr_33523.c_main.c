
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






typedef int pid_t ;


 int FIOASYNC ;
 int LOCK_EX ;
 int LOCK_NB ;
 int O_RDONLY ;
 int abort () ;
 int close (int) ;
 int execl (char*,char*,int *) ;
 int flock (int,int) ;
 int fork () ;
 int fprintf (int ,char*) ;
 int ioctl (int,int ,unsigned int*) ;
 int open (char*,int ) ;
 int stderr ;
 int waitpid (int ,int *,int ) ;

int main(int argc, char **argv)
{
    int fd;
    pid_t child;
    unsigned flag = ~0;

    fd = open("/dev/urandom", O_RDONLY);


    flock(fd, LOCK_EX | LOCK_NB);


    ioctl(fd, FIOASYNC, &flag);


    close(fd);






    do switch (child = fork()) {
            case 0: execl("/bin/true", "/bin/true", ((void*)0));
                     abort();
            case -1: fprintf(stderr, "fork() failed, %m\n");
                     break;
            default: fprintf(stderr, ".");
                     break;
    } while (waitpid(child, ((void*)0), 0) != -1);

    fprintf(stderr, "waitpid() failed, %m\n");
    return 1;
}
