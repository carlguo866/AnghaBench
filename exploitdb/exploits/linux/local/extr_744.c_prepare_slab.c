
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 int MAP_ANONYMOUS ;
 int* MAP_FAILED ;
 int MAP_FIXED ;
 int MAP_PRIVATE ;
 scalar_t__ PAGE_SIZE ;
 int PROT_READ ;
 int fatal (char*,int ) ;
 int map_addr ;
 int map_count ;
 int map_flags ;
 scalar_t__ sys_mmap2 (unsigned int,scalar_t__,int ,int,int ,int ) ;

inline void prepare_slab()
{
int *r;

 map_addr -= PAGE_SIZE;
 map_count++;
 map_flags ^= PROT_READ;

 r = (void*)sys_mmap2((unsigned)map_addr, PAGE_SIZE, map_flags,
        MAP_PRIVATE|MAP_ANONYMOUS|MAP_FIXED, 0, 0);
 if(MAP_FAILED == r) {
  fatal("try again", 0);
 }
 *r = map_addr;
}
