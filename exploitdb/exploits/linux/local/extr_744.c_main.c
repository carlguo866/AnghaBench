
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 int PGD_SIZE ;
 void* atoi (int ) ;
 unsigned int delta_max ;
 int fatal (char*,int ) ;
 int fstop ;
 int getopt (int,char**,char*) ;
 int getuid () ;
 void* libname ;
 unsigned int map_base ;
 int optarg ;
 int prepare () ;
 int setpgrp () ;
 void* shellname ;
 int silent ;
 void* smp_max ;
 int sscanf (int ,char*,unsigned int*) ;
 void* strdup (int ) ;
 int uid ;
 int usage (char*) ;
 int wipe_slab () ;
 void* wtime ;

int main(int ac, char **av)
{
int r;

 while(ac) {
  r = getopt(ac, av, "n:l:a:w:c:d:fsh");
  if(r<0) break;

  switch(r) {

  case 'f' :
   fstop = 1;
   break;

  case 's' :
   silent = 1;
   break;

  case 'n' :
   smp_max = atoi(optarg);
   break;

  case 'd':
   if(1!=sscanf(optarg, "%u", &delta_max) || delta_max > 100000u )
    fatal("bad delta value", 0);
   break;

  case 'w' :
   wtime = atoi(optarg);
   if(wtime<0) fatal("bad wait value", 0);
   break;

  case 'l' :
   libname = strdup(optarg);
   break;

  case 'c' :
   shellname = strdup(optarg);
   break;

  case 'a' :
   if(1!=sscanf(optarg, "%x", &map_base))
    fatal("bad addr value", 0);
   map_base &= ~(PGD_SIZE-1);
   break;

  case 'h' :
  default:
   usage(av[0]);
   break;
  }
 }


 uid = getuid();
 setpgrp();
 wipe_slab();
 prepare();

return 0;
}
