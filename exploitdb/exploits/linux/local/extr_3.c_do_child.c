
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 scalar_t__ ESRCH ;
 int PTRACE_ATTACH ;
 int PTRACE_SYSCALL ;
 int SIGCHLD ;
 int child ;
 scalar_t__ errno ;
 int fatal (char*) ;
 int fprintf (int ,char*,...) ;
 int getpid () ;
 int gotchild ;
 int ptrace (int ,int,int ,int ) ;
 int sigchld ;
 int signal (int ,int ) ;
 int stderr ;
 int victim ;

void do_child(void)
{
 int err;

 child = getpid();
 victim = child + 1;

 signal(SIGCHLD, sigchld);

 do
  err = ptrace(PTRACE_ATTACH, victim, 0, 0);
 while (err == -1 && errno == ESRCH);

 if (err == -1)
  fatal("[-] Unable to attach");

 fprintf(stderr, "[+] Attached to %d\n", victim);
 while (!gotchild) ;
 if (ptrace(PTRACE_SYSCALL, victim, 0, 0) == -1)
  fatal("[-] Unable to setup syscall trace");
 fprintf(stderr, "[+] Waiting for signal\n");

 for(;;);
}
