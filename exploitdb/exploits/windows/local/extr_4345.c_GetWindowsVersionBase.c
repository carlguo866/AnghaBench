
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_5__ TYPE_1__ ;


struct TYPE_5__ {int dwOSVersionInfoSize; int dwPlatformId; } ;
typedef scalar_t__* PUINT ;
typedef TYPE_1__ OSVERSIONINFOEXA ;
typedef int OSVERSIONINFOA ;
typedef int LPOSVERSIONINFOA ;
typedef int DWORD ;


 scalar_t__ FALSE ;
 scalar_t__ GetVersionExA (int ) ;
 int GetWindows9xVersion (TYPE_1__*) ;
 int GetWindowsNtVersion (TYPE_1__*,scalar_t__*) ;
 int OS_VERSION_UNKNOWN ;
 int OS_VERSION_WIN32S ;



 int memset (TYPE_1__*,int ,int) ;

DWORD
GetWindowsVersionBase(PUINT pServicePack)
{
  OSVERSIONINFOEXA osvi;
  DWORD dwVersion;

  if(pServicePack)
  {
    (*pServicePack) = 0;
  }
  memset(&osvi, 0, sizeof(OSVERSIONINFOEXA));
  osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFOEXA);
  if(FALSE == GetVersionExA((LPOSVERSIONINFOA)&osvi))
  {
    osvi.dwOSVersionInfoSize = sizeof(OSVERSIONINFOA);
    if(!GetVersionExA((LPOSVERSIONINFOA)&osvi))
    {
      return OS_VERSION_UNKNOWN;
    }
  }
  switch(osvi.dwPlatformId)
  {
  case 130:
    dwVersion = GetWindowsNtVersion(&osvi, pServicePack);
    break;
  case 129:
    dwVersion = GetWindows9xVersion(&osvi);
    break;
  case 128:
    dwVersion = OS_VERSION_WIN32S;
    break;
  default:
    dwVersion = OS_VERSION_UNKNOWN;
  }
  return dwVersion;
}
