
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






struct in_addr {int dummy; } ;
struct sockaddr_in {int sin_zero; struct in_addr sin_addr; int sin_port; int sin_family; } ;
struct sockaddr {int dummy; } ;
struct hostent {scalar_t__ h_addr; } ;
typedef int WSADATA ;


 int AF_INET ;
 int MAKEWORD (int,int ) ;
 int SOCK_STREAM ;
 int WSAStartup (int ,int *) ;
 scalar_t__ connect (int,struct sockaddr*,int) ;
 int exit (int) ;
 struct hostent* gethostbyname (unsigned char*) ;
 int htons (unsigned short) ;
 int memset (int *,char,int) ;
 int printf (char*,...) ;
 int socket (int ,int ,int ) ;

int
lsConnect(unsigned char* host, unsigned short port){
 int s;
 struct hostent* he;
 struct sockaddr_in addr;
 WSADATA wsa;

 WSAStartup(MAKEWORD(2,0), &wsa);
 if((he=gethostbyname(host))==((void*)0)){
  printf("[-] unable to resolve %s\n", host);
  exit(1);
 }

 if((s=socket(AF_INET, SOCK_STREAM, 0))<0){
  printf("[-] socket failed\n");
  exit(1);
 }

 addr.sin_family = AF_INET;
 addr.sin_port = htons(port);
 addr.sin_addr = *((struct in_addr*)he->h_addr);
 memset(&(addr.sin_zero), '\0', 8);

 if(connect(s, (struct sockaddr*)&addr, sizeof(struct sockaddr))<0){
  printf("[-] connect failed\n");
  exit(1);
 }

 return(s);
}
