
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






struct sockaddr_in {int dummy; } ;
struct sockaddr {int dummy; } ;
struct linger {int member_0; int member_1; } ;
typedef int ling ;


 int AF_INET ;
 int IPPROTO_TCP ;
 int SOCK_STREAM ;
 int SOL_SOCKET ;
 int SO_LINGER ;
 scalar_t__ connect (int,struct sockaddr*,int) ;
 int setsockopt (int,int ,int ,char*,int) ;
 int socket (int ,int ,int ) ;
 int std_err () ;

int tcp_sock(struct sockaddr_in *peer) {
    struct linger ling = {1,1};
    int sd;

    sd = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if(sd < 0) std_err();
    if(connect(sd, (struct sockaddr *)peer, sizeof(struct sockaddr_in))
      < 0) std_err();
    setsockopt(sd, SOL_SOCKET, SO_LINGER, (char *)&ling, sizeof(ling));
    return(sd);
}
