
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;






typedef int pthread_t ;
typedef int mach_port_t ;
typedef int kern_return_t ;
typedef int CFTypeRef ;


 int CFSTR (char*) ;
 int IORegistryEntryCreateCFProperty (int ,int ,int ,int ) ;
 int IOServiceGetMatchingService (int ,int ) ;
 int IOServiceMatching (char*) ;
 int IOServiceOpen (int ,int ,int ,int *) ;
 int MACH_PORT_NULL ;
 int OSSpinLockLock (int *) ;
 int OSSpinLockUnlock (int *) ;
 int kCFAllocatorDefault ;
 int kIOMasterPortDefault ;
 int lock ;
 int mach_task_self () ;
 int pthread_create (int *,int *,int ,int *) ;
 int set_params (int ) ;
 int thread_func ;

int main(int argc, char** argv){
  kern_return_t err;
  OSSpinLockLock(&lock);

  pthread_t t;
  pthread_create(&t, ((void*)0), thread_func, ((void*)0));

  mach_port_t service = IOServiceGetMatchingService(kIOMasterPortDefault,
                                                    IOServiceMatching("IOHDIXController"));

  mach_port_t conn = MACH_PORT_NULL;
  IOServiceOpen(service, mach_task_self(), 0, &conn);

  set_params(conn);
  for(;;) {
    OSSpinLockUnlock(&lock);
    CFTypeRef p = IORegistryEntryCreateCFProperty(service,
                                                  CFSTR("di-root-image-result"),
                                                  kCFAllocatorDefault,
                                                  0);
  }
  return 0;
}
