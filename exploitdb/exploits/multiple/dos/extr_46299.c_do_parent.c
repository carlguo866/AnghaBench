
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_4__ TYPE_2__ ;
typedef struct TYPE_3__ TYPE_1__ ;


struct TYPE_3__ {char* address; } ;
struct TYPE_4__ {int msgh_size; int msgh_local_port; } ;
struct rcv_msg {TYPE_1__ desc; TYPE_2__ hdr; int member_0; } ;
typedef int msg ;
typedef int mach_port_t ;
typedef int kern_return_t ;


 int MACH_ERR (char*,int ) ;
 int UNIT_SIZE ;
 int mach_msg_receive (TYPE_2__*) ;
 int printf (char*,...) ;
 int usleep (int) ;

void do_parent(mach_port_t shared_port) {
  kern_return_t err;


  struct rcv_msg msg = {0};
  msg.hdr.msgh_local_port = shared_port;
  msg.hdr.msgh_size = sizeof(msg);
  err = mach_msg_receive(&msg.hdr);
  MACH_ERR("parent receiving child OOL message", err);

  char* rcv_b_addr = msg.desc.address;
  volatile char* rcv_b_char_addr = rcv_b_addr + (UNIT_SIZE-1);

  printf("rcv_a_char_addr: %p\n", rcv_b_char_addr);

  while(1) {
    printf("parent sees in OOL desc: %c\n", *rcv_b_char_addr);
    usleep(100000);
  }
}
