
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_2__ TYPE_1__ ;


struct TYPE_2__ {char* pwd; scalar_t__ pwdlen; } ;


 int err (int ,char*,...) ;
 int free (char*) ;
 char* getmsg (char*) ;
 TYPE_1__ hostinf ;
 int putserv (char*) ;
 char* strchr (char*,char) ;
 scalar_t__ strlen (char*) ;
 int strncat (char*,char*,int) ;
 scalar_t__ strncmp (char*,char*,int) ;
 char* strrchr (char*,char) ;
 char* xcalloc (scalar_t__,int) ;
 char* xstrdup (char*) ;

void
getpwd (void)
{
        char *tmp,
                *line;
        char *chr,
                *rchr;

        putserv ("PWD\n");
        line = getmsg ("257 ");
        if (strncmp ("257 ", line, 4) != 0)
                err (0, "getpwd failed: incorrect answer: %s", line);


        tmp = xcalloc (strlen (line) + 1, 1);

        chr = strchr (line, '"');
        rchr = strrchr (line, '"');

        if (chr == ((void*)0))
                err (0, "no \"'s in getpwd.");

        if (chr == rchr)
                err (0, "only one \" in getpwd.");

        if ((rchr - chr) < 2)
                err (0, "pwd too short?");

        strncat (tmp, chr + 1, rchr - chr - 1);

        if (hostinf.pwd != ((void*)0))
                free (hostinf.pwd);

        hostinf.pwd = xstrdup (tmp);
        free (tmp);

        hostinf.pwdlen = strlen (hostinf.pwd);

}
