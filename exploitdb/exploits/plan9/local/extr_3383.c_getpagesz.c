
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 int False ;
 int OREAD ;
 int True ;
 int close (int) ;
 int err (char*) ;
 int msg (char*,int ) ;
 int open (char*,int ) ;
 int pagesz ;
 int read (int,char*,int) ;
 int strtoul (char*,int ,int ) ;

__attribute__((used)) static int
getpagesz(void)
{
 char buffer[64];
 char * p;
 char * q;
 int fd;
 int e;

 fd = open("#c/swap", OREAD);
 if(fd < 0)
 {
  err("can't open \"#c/swap\": %r");
  return False;
 }

 e = read(fd, buffer, sizeof buffer);
 if(e < 0)
 {
  err("can't read \"#c/swap\": %r");
  close(fd);
  return False;
 }

 close(fd);

 for(p = buffer; (p - buffer) < sizeof buffer && *p != '\n'; p++)
  ;
 for(q = ++p;
  (q - buffer) < sizeof buffer && (*q != ' ' && *q != '\t');
  q++)
  ;
 *q = 0;

 pagesz = strtoul(p, 0, 0);
 msg("the system page size is %d", pagesz);

 return True;
}
