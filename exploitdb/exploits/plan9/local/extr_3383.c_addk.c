
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_5__ TYPE_1__ ;


struct TYPE_5__ {struct TYPE_5__* next; int nnew; int new; int nold; int old; int addr; } ;
typedef TYPE_1__ Kfunc ;


 int False ;
 int True ;
 int abort () ;
 TYPE_1__* calloc (int,int) ;
 int delk (TYPE_1__**) ;
 int err (char*) ;
 TYPE_1__* kf ;
 int parsebytes (char*,int *,int *) ;
 int perror (char*) ;
 int strtoull (char*,int ,int ) ;

__attribute__((used)) static int
addk(char * p)
{
 Kfunc * kp;
 Kfunc * k;
 char * c;
 char * e;
 char t;

 k = calloc(1, sizeof *k);
 if(!k)
 {
  perror("calloc");
  abort();
 }

 for(c = p; *c && *c != ','; c++)
  ;
 t = *c;
 *c = 0;

 k->addr = strtoull(p, 0, 0);
 *c = t;

 if(!t)
  goto _fail;

 for(e = ++c; *c && *c != ','; c++)
  ;
 t = *c;
 *c = 0;

 if(!parsebytes(e, &k->old, &k->nold))
  goto _fail;

 if(!t)
  goto _fail;

 for(e = ++c; *c; c++)
  ;

 if(!parsebytes(e, &k->new, &k->nnew))
  goto _fail;

 for(kp = kf; kp && kp->next; kp = kp->next)
  ;
 if(!kp)
  kf = k;
 else
  kp->next = k;

 return True;

_fail:
 err("invalid K syntax");
 delk(&k);
 return False;
}
