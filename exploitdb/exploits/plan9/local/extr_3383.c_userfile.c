
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;
 int False ;
 int OREAD ;
 int True ;
 int close (int) ;
 int err (char*,...) ;
 int open (char*,int ) ;
 int read (int,char*,int) ;
 int xstrdup (char*,char**) ;

__attribute__((used)) static int
userfile(char * uf, char ** namep)
{
 char buffer[1024];
 int fd;
 int n;

 fd = open(uf, OREAD);
 if(fd < 0)
 {
  err("can't obtain an username from \"%s\": %r", uf);
  return False;
 }

 n = read(fd, buffer, sizeof buffer);
 if(n <= 0)
 {
  err("bad read on \"%s\"? %r");
  close(fd);
  return False;
 }

 if(n == sizeof buffer)
  n = sizeof buffer - 1;

 buffer[n] = 0;

 close(fd);
 xstrdup(buffer, namep);

 return True;
}
