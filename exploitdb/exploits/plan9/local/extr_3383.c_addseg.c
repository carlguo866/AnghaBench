
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_4__ TYPE_1__ ;


typedef scalar_t__ ulong ;
struct TYPE_4__ {scalar_t__ ceiling; scalar_t__ base; } ;
typedef TYPE_1__ Seg ;


 int False ;
 int True ;
 int abort () ;
 TYPE_1__* calloc (int,int) ;
 int err (char*) ;
 int msg (char*,scalar_t__,scalar_t__) ;
 int perror (char*) ;
 TYPE_1__* seg ;
 scalar_t__ strtoul (char*,int ,int ) ;

__attribute__((used)) static int
addseg(char * p)
{
 ulong ceiling;
 ulong base;
 char * c;
 Seg * s;
 char t;

 if(seg)
 {
  err("only one segment can be defined");
  return False;
 }

 for(c = p; *c && *c != ','; c++)
  ;
 if(!*c)
 {
  err("invalid seg syntax");
  return False;
 }

 t = *c;
 *c = 0;

 base = strtoul(p, 0, 0);
 *c++ = t;

 ceiling = strtoul(c, 0, 0);

 if(ceiling <= base)
 {
  err("invalid seg syntax; ceiling <= base");
  return False;
 }

 s = calloc(1, sizeof *s);
 if(!s)
 {
  perror("calloc");
  abort();
 }

 s->base = base;
 s->ceiling = ceiling;

 msg("using a segment of %luX -> %luX", s->base, s->ceiling);

 seg = s;

 return True;
}
