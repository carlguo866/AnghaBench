
typedef unsigned long size_t;
typedef long intptr_t; typedef unsigned long uintptr_t;
typedef long scalar_t__;

typedef int bool;




typedef struct TYPE_3__ TYPE_1__ ;


struct TYPE_3__ {int entry_number; int base_addr; int limit; int seg_32bit; int seg_not_present; scalar_t__ lm; scalar_t__ useable; scalar_t__ limit_in_pages; scalar_t__ read_exec_only; int contents; } ;


 int FLAG ;
 int MODIFY_LDT_CONTENTS_STACK ;
 int add_ldt (TYPE_1__*,char*) ;
 TYPE_1__ new_stack_segment ;
 int sleep (int) ;

void * segManipulatorThread(void * none)
{
  new_stack_segment.entry_number = 0x12;
  new_stack_segment.base_addr = 0x10000;
  new_stack_segment.limit = 0xffff;
  new_stack_segment.seg_32bit = 1;
  new_stack_segment.contents = MODIFY_LDT_CONTENTS_STACK;
  new_stack_segment.read_exec_only = 0;
  new_stack_segment.limit_in_pages = 0;
  new_stack_segment.seg_not_present = 0;
  new_stack_segment.useable = 0;
  new_stack_segment.lm = 0;


  add_ldt(&new_stack_segment, "newSS");


  sleep(3);


  new_stack_segment.seg_not_present = 1;
  add_ldt(&new_stack_segment, "newSS disable");
  FLAG = 1;
  sleep(15);

  return ((void*)0);
}
